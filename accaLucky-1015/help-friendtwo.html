<!DOCTYPE html><html lang="zh">	<head>		<meta charset="UTF-8">		<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />		<meta http-equiv="X-UA-Compatible" content="ie=edge">		<title>中博教育-助力页面</title>		<link rel="stylesheet" href="css/friend.css">	</head>	<body>		<div class="help-11-14">			<div class="banner">				<img src="image/banner-firend.jpg" class="image-bg" alt="">				<div class="banner-head">					<img src="https://accahelper.zbgedu.com/acca/userfiles/497ba53e12834a83ad05e2d1411142cd/images/acca/upload/default/1020.png" id="head-img" class="head-img" alt="">					<p class="nick-name"><span id="nickNames">学员**</span></p>				</div>			</div>			<!--表单内容-->			<div class="form-info">				<img src="image/help-active.jpg" alt="" class="help-active-bg"/>				<div class="banner-form">					<div class="form-input marB">						<input type="text" placeholder="输入手机号" id="phone">					</div>					<div class="form-input">						<input type="text"  id="codeVal" placeholder="输入验证码">						<button class="code-btn sendCodes" id="codeBtn">发送验证码</button>					</div>				</div>			</div>						<!--按钮-->			<div class="btn-div">				<img src="image/friend-btn-bg.jpg" class="friend-btn-bg" />				<button class="btn-one translateX btnLoginMain help-btnState">					<img src="image/btn-join.png" alt="" />				</button>				<button class="btn-two translateX loginBtn help-btnState">					<img src="image/btn-helps.png" alt="" />				</button>							</div>						<!--规则-->			<div class="ruler-box">				<div class="ruler-bgc-fff">				<img src="image/ruler-title-friend.png" class="image-bg translateX" alt="">				<div class="ruler-center">					<p>						<span class="list">01</span>						<span>11月1日起至11月30日，每邀请5位好友助力成功后，即可参与一次抽奖；</span>					</p>					<p>						<span class="list">02</span>						<span>每人每天邀请上限为15人（即每人每日最多3次抽奖机会）；</span>					</p>					<p>						<span class="list">03</span>						<span>达到15人后，当日（0:00—24:00）将不能再邀请好友进行助力，需待到第二天0:00继续邀请； </span>					</p>					<p>						<span class="list">04</span>						<span>每个手机号仅限参与和助力一次；</span>					</p>					<p>						<span class="list">05</span>						<span>用户邀请好友数量以一个自然天为单位，第二天将清空助力好友人数和抽奖次数，需要继续邀请好友，获得抽奖机会； </span>					</p>					<p>						<span class="list">06</span>						<span>通过非正常手段获取奖品的用户，一经发现中博教育有权取消其参与资格并保留追责的权利。</span>					</p>					<p>						<span class="list">07</span>						<span>全额免单机考券按最高额度设置，报考时一张机考券只能使用一次，剩余部分不找零、不兑现；</span>					</p>				</div>								</div>				<img src="image/ruler-bottom-bg.png" class="image-bg" alt="">			</div>			<div class="tip-modal">				<div class="weak-tip">					<p class="weapk-p" id="wealTip">提示呀</p>					<img src="image/icon-loading2.png" class="loadingImg" alt="">				</div>			</div>		</div>		<script src="./js/jquery.min.js"></script>		<script src="js/reset.js"></script>		<!--<script src="js/vconsole.min.js"></script>-->		<script>			var _hmt = _hmt || [];			(function() {			  var hm = document.createElement("script");			  hm.src = "https://hm.baidu.com/hm.js?f33ebbf7a5907a63578bb287927b7a71";			  var s = document.getElementsByTagName("script")[0]; 			  s.parentNode.insertBefore(hm, s);			})();		</script>		<script>$(function() {//	new VConsole();	var aipUrl = 'https://accahelper.zbgedu.com/acca'//	var aipUrl = 'https://accahelperdev.zbgedu.com';					var webUrl = 'https://m.zbgedu.com'//	var webUrl = 'https://wwwdemo.zbgedu.com';					var codeUrl = 'https://api.zbgedu.com'//	var codeUrl = 'https://apidemo.zbgedu.com';	var tokens = '';	var zbgData = {		activeId: '',		partId: ''	};		//只显示助力按钮	$('.help-btnState').hide()	$('.help-btnState.btn-two').show()	//地址栏字符串转换为json	function getUrlParams(e) {		var t, n, r, i = e,			s = {};		t = i.split("&"),			r = null,			n = null;		for(var o in t) {			var u = t[o].indexOf("=");			u !== -1 && (r = t[o].substr(0, u),				n = t[o].substr(u + 1),				s[r] = n)		}		return s;	}	var hrefParams = window.location.search.substr(1)	if(hrefParams) {		var urlJson = getUrlParams(hrefParams)		if(urlJson.nickname) {			$('#nickNames').html(decodeURIComponent(urlJson.nickname))		} else {			$('#nickNames').html('学员**')		}		var linkpartName = urlJson.partId;		if(linkpartName){			zbgData.partId = linkpartName		}	}	function getQueryString(name) {		const reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");		const urlObj = window.location;		var r = urlObj.href.indexOf('#') > -1 ? urlObj.hash.split("?")[1].match(reg) : urlObj.search.substr(1).match(reg);		if(r != null) return unescape(r[2]);		return null;	}	function getQueryVariable(variable) {		var query = window.location.search.substring(1);		var vars = query.split("&");		for(var i = 0; i < vars.length; i++) {			var pair = vars[i].split("=");			if(pair[0] == variable) {				return pair[1];			}		}		return(false);	}	//点击我也要参与	$(document).on('click', '.btnLoginMain', function() { //跳转到下载页		//					window.location.href = 'https://a.app.qq.com/o/simple.jsp?pkgname=com.chinaife.acca'		window.location.href = "./zbg-index.html"	})	//助力	function helpFirend(linkPhone, mainPhone) {		$('.tip-modal').show()		$('.weak-tip').addClass('white')		let params = {			"activityId": "43",			"mobile": linkPhone, //被助力人手机号			"phone": mainPhone // 助力人手机号		}		$.ajax({			type: "post",			url: aipUrl + "/api/luckDraw/saveHand.do",			dataType: 'json',			data: JSON.stringify(params),			contentType: "application/json;charset=UTF-8",			success: function(res) {				$('.tip-modal').hide()				$('.weak-tip').removeClass('white')				$('.help-btnState').hide()				$('.help-btnState.btn-one').show()				showTips(res.obj || '抱歉，未成功')			}		})	}		//小助手二次登录	function loginAgin(phone,activId,code){		$.ajax({			type:"POST",			url: aipUrl+"/api/user/login.do", 			contentType: "application/json;charset=UTF-8",			async:true,			data:JSON.stringify({				smsVcode: code,			    phone: phone,			    activityId: activId,			    source:"0",			    deviceId: '123456'			}),			success:function(res){				$('.tip-modal').hide()				$('.weak-tip').removeClass('white')				if(res.respCode == 0){					helpFirend(getQueryString('phone'), phone)				}else{					showTips(res.respDesc)				}			}		})	}	//获取tokens 	function getToken(phone,count) {		$.ajax({			type: 'post',			url: webUrl + '/api/PublicLoginApi/get_token',			async: false,			success: function(res) {				tokens = res.token				if(count!=1){					countDown(60, phone, tokens)				}			}		})	}	//验证码点击登录	$(document).on('click', '.loginBtn', function() {		var phone = $('#phone').val().replace(/\s+/g, "")		var telReg = /^1[3456789]\d{9}$/		var codeTxt = $('#codeVal').val().replace(/\s+/g, "")		if(phone && telReg.test(phone)) {			if(codeTxt) {				$('.tip-modal').show()				$('.weak-tip').addClass('white')				if(getQueryString('device')=='h'){//H5助力					$.ajax({						type: "post",						url: webUrl + '/api/PublicActivityLoginApi/loginActivity',						async: false,						data: {							'token': tokens,							'mobile': phone, 							'activeId': '8678da870c3311eb8d48506b4b4a9882',							'remark': 'ACCA小助手活动', //活动备注 							'classOne': '10',							'classTwo': '',							'password': '',							'code': codeTxt,							'activeTag': 'ACCA小助手活动',							'sn': '05',							'type': '2',							"partId": zbgData.partId						},						success: function(res) {							$('#phone').val('')							$('#codeVal').val("")							if(res.state == 'success') { //存储个人信息								helpFirend(getQueryString('phone'), phone)							} else {								$('.tip-modal').hide()								$('.weak-tip').removeClass('white')								showTips(res.msg)							}						},						fail: function() {							$('.tip-modal').hide()							$('.weak-tip').removeClass('white')						}					})				}else{					var activeIds = getQueryString('partId')					loginAgin(phone,activeIds,codeTxt)				}							}else {				showTips('验证码不能为空')			}		}else{			showTips('手机号有误')		}	})		//点击发送验证码	$(document).on('click', '.sendCodes', function() {		var phone = $('#phone').val().replace(/\s+/g, "")		var telReg = /^1[3456789]\d{9}$/		if(phone && telReg.test(phone)){			if(getQueryString('device')=='h'){//H5助力				getToken(phone)			}else{				codeAngin(phone)			}		} else {			showTips('手机号有误')		}	})		//小助手验证码发送	function codeAngin(phone){		$('.tip-modal').show()		$('.weak-tip').addClass('white')		$.ajax({			type: "POST",			dataType: 'json',			url: aipUrl + "/api/user/getSmsVcode.do", //测试环境			async: true,			contentType: "application/json;charset=UTF-8",			data: JSON.stringify({				'phone': phone,			}),			success: function(res) {				$('.tip-modal').hide()				$('.weak-tip').removeClass('white')				if(res.respCode == '0') {					showTips('验证码已发送!')					countAgin(60)				} else {					showTips('未成功，请重试')				}			},			fail: function(res) {				$('.tip-modal').hide()				$('.weak-tip').removeClass('white')				showTips('请求失败了呢！')			}		});	}	function countAgin(time){		var codeTxt = $('#codeBtn').html().replace(/\s+/g, "")		if(codeTxt != '发送验证码')			return false;		$('#codeBtn').html(time + 's后重新发送')		var timers = setInterval(function() {			time--			$('#codeBtn').html(time + 's后重新发送')			if(time == 0) {				clearInterval(timers)				$('#codeBtn').html('发送验证码')			}		}, 1000)	}		//倒计时60s	function countDown(time, phone, tokens) { //倒计时		var codeTxt = $('#codeBtn').html().replace(/\s+/g, "")		if(codeTxt != '发送验证码')			return false;		$('#codeBtn').html(time + 's后重新发送')		var timers = setInterval(function() {			time--			$('#codeBtn').html(time + 's后重新发送')			if(time == 0) {				clearInterval(timers)				$('#codeBtn').html('发送验证码')			}		}, 1000)		$.ajax({			type: "POST",			dataType: 'json',			url: codeUrl + "/api/base/sms/sendsms/v1.0/", //测试环境			async: true,			data: {				'phone': phone,				'token': tokens,				'templateSn': '05',				'isResend': '1'			},			success: function(res) {				if(res.state == 'success') {					showTips('验证码已发送!')				} else {					showTips('未成功，请重试')				}			},			fail: function(res) {				showTips('请求失败了呢！')			}		});	}})</script>	</body></html>