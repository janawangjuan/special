<!DOCTYPE html><html>	<head>		<meta charset="UTF-8">		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">		<meta http-equiv="X-UA-Compatible" content="ie=edge">		<title>机考中心</title>		<meta name="keywords" content=""/>		<meta name="description" content=""/>		<script src="https://api.map.baidu.com/api?v=2.0&ak=jL4dIXrzfukwEsbl7kWucYmaKBjgod9i"></script>		<!--<script src="js/vconsole.min.js"></script>-->		<script src="js/jquery-2.0.0.min.js"></script>		<script>//			new VConsole()				//自动计算rem				! function(n) {					var e = n.document,						t = e.documentElement,						i = 750,						d = i / 100,						o = "orientationchange" in n ? "orientationchange" : "resize",						a = function() {							var n = t.clientWidth || 320;							n > 750 && (n = 750);							t.style.fontSize = n / d + "px"						};					e.addEventListener && (n.addEventListener(o, a, !1), e.addEventListener("DOMContentLoaded", a, !1))									}(window);		</script>		<link rel="stylesheet" href="css/reset.css">		<link rel="stylesheet" href="css/testCenter.css">	</head>	<body>		<div class="container test-center">			<div class="banner">				<h1><span id="cityNames"></span>机考中心</h1>				<div class="select-point">					<p class="sele-p"><span id="points"></span><i></i></p>					<ul class="list-ul" id='listUl'>					</ul>				</div>			</div>			<div class="sub-nav"></div>			<div class="test-data">				<h3 class="test-data-h">考 试 计 划</h3>				<p class="test-data-p">本日历仅为考试计划仅供参考，实际考试安排请以ACCA Helper开放场次为准。</p>				<div class="calendar-box" id="calendar">				</div>			</div>			<div class="attention">				<h3 class="test-data-h">注 意 事 项</h3>				<p class="test-data-p">请关注机考中心的温馨提示，帮您顺利完成考试！</p>				<div class="attent-list" id="attentList">					<p class="list-item"><span class="list-title"><em>1</em>测试：</span><span class="list-txt">Lorem ipsum dolor sit amet, consectetur adipisicing elit!</span></p>				</div>			</div>			<div class="traffic">				<h3 class="test-data-h">交 通</h3>				<p class="test-data-p">请提前规划路线，保证提前30分钟到达考场！</p>				<div class="baidu-map">					<div id="allmap"></div>					<div class="map-txt">						<p>地址：<span id="address"></span></p>						<p>交通方式：<span id="detailBus"></span></p>					</div>				</div>			</div>			<div class="contact">				<p class="con-title">联 系 方 式</p>				<p class="sub-con-til">请在工作时间内联系机考中心，电话如遇忙线或无人接听，请更换时间拨打！</p>				<div class="tel-box">					<p class="p1">电话：<span id="detailTel"></span></p>				</div>				<div class="email-box">					<p class="p1">邮箱：<span id="detailEmail"></span></p>				</div>			</div>			<div class="footers">				中博教育 | 您的全球教育发展顾问			</div>		</div>		<div class="loadings">			<div class="load-center">				<img src="image/timg.gif" class="load-icon" alt="" />			</div>		</div>		<script src="js/calendar.js"></script>		<script>			$(function() {				// 判断链接地址上是不是有参数				function getUrlParam (name) {				    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');				    var r = window.location.search.substr(1).match(reg);				    if (r != null) return decodeURIComponent(r[2]); return null;				}								//判断是否为wap端				function isWap(){					let flag = true					var ua = navigator.userAgent;					var ipad = ua.match(/(iPad).*OS\s([\d_]+)/),										isIphone =!ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/),										isAndroid = ua.match(/(Android)\s+([\d.]+)/),										isMobile = isIphone || isAndroid;										//判断					if(isMobile){						flag = true					}else{						flag = false					}					return flag;				}				//接口域名				var baseUrl = 'https://m.zbgedu.com/' 				if(isWap()){					var baseUrl = 'https://m.zbgedu.com/' 				}else{					var baseUrl = 'https://www.zbgedu.com/' 				}				var api = {					getBanerPoint: baseUrl + 'shop_machine/machine/api_machine_info',					detailsInfor: baseUrl + 'shop_machine/machine/api_machine_row',				}				//设置cookie				function setCookie(name, value) {					var Days = 30;					var exp = new Date();					exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);					document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();				}				//读取cookie				function getCookie(name) {					var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");					if(arr = document.cookie.match(reg))						return unescape(arr[2]);					else						return null;				}				//判断是否为ios				function isAnd() {					var u = navigator.userAgent;					var isAndoroid = u.indexOf('Android') > -1					return isAndoroid				}				var getPointId = ''				var getPointName = ''				var seeArrs = ''				var seeID = ''				var ed = []				var Id = []				if(isAnd()) {					getPointId = getCookie('pointId')					getPointName = getCookie('pointName')					seeArrs = getCookie('lookArrs')					seeID = getCookie('lookId')				} else {					getPointName = localStorage.getItem('pointName')					getPointId = localStorage.getItem('pointId')					seeArrs = localStorage.getItem('lookArrs')					seeID = localStorage.getItem('lookId')				}						/*var spanStr = '<span class="browse-span">最近浏览</span>'				if(ed.length > 1) {					spanStr += '<span class="browse-a" data-id=' + Id[0] + '>' + ed[0] + '</span><span class="browse-a" data-id=' + Id[1] + '>' + ed[1] + '</span>'				} else {					spanStr += '<span class="browse-a"  data-id=' + Id[0] + '>' + ed[0] + '</span>'				}				$("#subTop").html(spanStr);				$(document).find('#points').html(getPointName)*/				//点击最近预览				/*$(document).on('click', '.browse-a', function() {					getDetails($(this).attr('data-id'))					$('#points').html($(this).html())				})*/				// banner图 下拉框选择				function getBanPoint() {					$.ajax({						type: "get",						url: api.getBanerPoint,						async: true,						dataType: 'json',						success: function(res) {							addHtml(res, 'list-ul')						}					});				}				getBanPoint()												if(getUrlParam('getPointId')){					getPointId = getUrlParam('getPointId')				}				getDetails(getPointId)																//获取某个考点位置				function getDetails(getPointId) {					console.log('参数')					console.log(getPointId)					console.log('参数')					$('.loadings').show()					$.ajax({						type: "POST",						url: api.detailsInfor,						async: false,						data: {							id: getPointId						},						success: function(res) {							$('.loadings').hide()							console.log(res.data.name)							$(document).find('#points').html(res.data.name)																												$(document).find('#address').html(res.data.address)							$(document).find('#detailTel').html(res.data.tel)							$(document).find('#detailBus').html(res.data.traffic_type)							$(document).find('#detailEmail').html(res.data.email)							//							$(document).find('#attentList').html(res.data.wap_attention)							$(document).find('#attentList').html(attendHtml(res.data.attention))							$(document).find('#cityNames').html(res.data.name)							var latitude = res.data.latitude							var longitude = res.data.longitude							mapPoint(latitude, longitude)							//地图控件							$('#calendar').html('')							new calendar('calendar', res.data.examday)						}					});				}				//注意事项				function attendHtml(data) {					var str = ''					for(var i = 0; i < data.length; i++) {						var inx = i + 1						str += '<li class="list-item"><p class="list-title"><em>' + inx + '</em>' + data[i].attention_title + ': </p><p class="list-txt"> ' + data[i].attention_con + '</p></li>'					}					return str				}				//添加文本				function addHtml(obj, id) {					var str = ''					obj.forEach((item, index) => {						str += '<li data-pointid=' + item.id + '>' + item.name + '</li>'					})					$('.' + id).html(str)				}				function mapPoint(lat, log) {					//百度地图					var map = new BMap.Map("allmap");					var point = new BMap.Point(log, lat);					var myIcon = new BMap.Icon("image/point.png", new BMap.Size(144, 144));					map.centerAndZoom(point, 15);					var marker = new BMap.Marker(point); // 创建标注					map.addOverlay(marker); // 将标注添加到地图中					marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画					map.enableScrollWheelZoom(false); //开启鼠标滚轮缩放				}				//可以动态设置级别：				//map.setMaxZoom(200);				//map.setMinZoom(10);				//添加内容				$('.select-point .sele-p').on('touchstart', function(e) {					e.preventDefault();					var flagA = $(this).parent().hasClass('active')					if(flagA) {						$('.list-ul').slideUp();						$('.select-point').removeClass('active');					} else {						$('.list-ul').slideDown()						$(this).parent().addClass('active');					}				})				//区分点击与滑动				var flag = false;				var $listUl = $('#listUl');				$listUl.on('touchstart touchmove touchend', function(event) {					switch(event.type) {						case 'touchstart':							falg = false;							break;						case 'touchmove':							falg = true;							break;						case 'touchend':							if(!falg) {								/*console.log('点击了')								console.log(event.target.innerHTML)								console.log(event.target.dataset.pointid)*/								if(ed.indexOf(event.target.innerHTML) == -1) {									ed.unshift(event.target.innerHTML)									Id.unshift(event.target.dataset.pointid)								}								if(isAnd()) {									setCookie('lookArrs', ed)									setCookie('lookId', Id)								} else {									localStorage.setItem('lookArrs', ed)									localStorage.setItem('lookId', Id)								}//								var spanStr = '<span class="browse-span">最近浏览</span>'
//								if(ed.length > 1) {
//									spanStr += '<span class="browse-a" data-id=' + Id[0] + '>' + ed[0] + '</span><span class="browse-a" data-id=' + Id[1] + '>' + ed[1] + '</span>'
//								} else {
//									spanStr += '<span class="browse-a"  data-id=' + Id[0] + '>' + ed[0] + '</span>'
//								}
//								$("#subTop").html(spanStr);								if(event.target.dataset.pointid) {									$('#points').html(event.target.innerHTML)									$('.list-ul').slideUp();									var pointIds = event.target.dataset.pointid									$('.select-point').removeClass('active');									getDetails(pointIds)								}							} else {								console.log('滚动')							}							break;					}				});			})		</script>	</body></html>